(this.webpackJsonpphotoproof=this.webpackJsonpphotoproof||[]).push([[0],{105:function(e,t,n){e.exports={titleTextarea:"styles_titleTextarea___LQBb",centeredContainer:"styles_centeredContainer__2oj87",titleBar:"styles_titleBar__3Svkz"}},112:function(e,t,n){e.exports={logoutBtn:"styles_logoutBtn__1Q3Tj",logo:"styles_logo__1_jvw"}},113:function(e,t,n){e.exports={thumbnail:"styles_thumbnail__WqL39",tableContainer:"styles_tableContainer__1YpyL"}},116:function(e,t,n){e.exports={dropzoneError:"styles_dropzoneError__NRvNd",dropzoneErrorBorder:"styles_dropzoneErrorBorder__bLA7R"}},118:function(e,t,n){e.exports={horizontal:"styles_horizontal__2_SKe",selectedDetails:"styles_selectedDetails__LstAH"}},119:function(e,t,n){e.exports={exitBtn:"styles_exitBtn__3Yr2u",disabledTextarea:"styles_disabledTextarea__32-XD"}},120:function(e,t,n){e.exports={toolbarSelected:"styles_toolbarSelected__12xMq"}},121:function(e,t,n){e.exports={container:"styles_container__2RPhL",centeredConainer:"styles_centeredConainer__1Atll"}},135:function(e,t,n){e.exports={exitBtn:"styles_exitBtn__3IoQO"}},151:function(e,t,n){e.exports={photoIndex:"styles_photoIndex__2CgGJ"}},155:function(e,t,n){e.exports={exitBtn:"styles_exitBtn__3h-ak"}},156:function(e,t,n){e.exports={exitBtn:"styles_exitBtn__1xUw-"}},157:function(e,t,n){e.exports={filterBtns:"styles_filterBtns__32b7W"}},159:function(e,t,n){e.exports={thumbnail:"styles_thumbnail__1D0k_"}},217:function(e,t,n){},218:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(18),o=n.n(r),i=n(11),l=n(112),s=n.n(l),d=(n(187),n(35)),u=n(26),b=n(4),j=n.n(b),h=n(9),m=n(12),x=n(69),p=(n(188),n(219),n(220),n(288)),f=n(163),O=function(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=n.length,c=0;c<e;c++)t+=n.charAt(Math.floor(Math.random()*a));return t};x.a.initializeApp({apiKey:"AIzaSyCgZeYaOGGvx9fdZDSnUs3KtFiab9SSTCc",authDomain:"photo-proof-showoff.firebaseapp.com",projectId:"photo-proof-showoff",storageBucket:"photo-proof-showoff.appspot.com",messagingSenderId:"816746399237",appId:"1:816746399237:web:ff05ae75e27a6a92983e6c"});try{x.a.auth()}catch(dn){alert("Firebase config file is invalid or missing.")}var g=x.a.auth(),v=x.a.firestore(),C=x.a.storage(),S=function(){var e=Object(h.a)(j.a.mark((function e(t,n,a){var c,r,o,i,l,s,d,u,b,h,m,p;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&n){e.next=2;break}throw new Error("missing data or files");case 2:a(1);case 3:return r=O(8),c=v.collection("collections").doc(r),e.next=7,c.get();case 7:o=e.sent;case 8:if(o.exists){e.next=3;break}case 9:return a(5),i=t.title,l=t.minSelect,s=t.maxSelect,d=t.allowComments,e.next=13,c.set({title:i,dateCreated:x.a.firestore.FieldValue.serverTimestamp(),minSelect:l,maxSelect:s,allowComments:d,status:"selecting",finalComment:""});case 13:return a(10),u=c.collection("photos"),b=v.batch(),e.next=18,R(r,n,a);case 18:for(h=e.sent,m=0;m<h.length;m++)p=h[m],b.set(u.doc(h[m].id),p);return e.next=22,b.commit();case 22:return a(100),e.abrupt("return",r);case 24:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),w=function(){var e=Object(h.a)(j.a.mark((function e(t,n){var a,c,r,o,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.title,c=t.minSelect,r=t.maxSelect,o=t.allowComments,i=v.collection("collections").doc(n),e.next=4,i.update({title:a,minSelect:c,maxSelect:r,allowComments:o,status:"selecting"});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){var e=Object(h.a)(j.a.mark((function e(t,n,a){var c,r,o,i,l;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=C.ref("logo"),!(t.length>0)){e.next=18;break}return e.prev=3,e.next=6,c.listAll();case 6:o=e.sent,e.next=11;break;case 9:e.prev=9,e.t0=e.catch(3);case 11:return o&&o.items.length>0&&["logo.png"].forEach(function(){var e=Object(h.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.child(t).delete();case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()),e.next=14,c.child("logo.png").put(t[0]);case 14:return i=e.sent,e.next=17,i.ref.getDownloadURL();case 17:r=e.sent;case 18:if(a(50),l=v.collection("settings").doc("settings"),!(t.length>0)){e.next=25;break}return e.next=23,l.set({logoUrl:r,logoWidth:n},{merge:!0});case 23:e.next=27;break;case 25:return e.next=27,l.set({logoWidth:n},{merge:!0});case 27:a(100);case 28:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t,n,a){return e.apply(this,arguments)}}(),k=function(){var e=Object(h.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.collection("settings").doc("settings").get();case 2:return t=e.sent,e.abrupt("return",t.data());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(h.a)(j.a.mark((function e(t,n,a){var c,r,o,i,l;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=v.collection("collections").doc(t).collection("photos"),r=v.batch(),e.next=4,R(t,n,a);case 4:for(o=e.sent,i=0;i<o.length;i++)l=o[i],r.set(c.doc(o[i].id),l);return e.next=8,r.commit();case 8:return a(100),e.abrupt("return");case 10:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),R=function(){var e=Object(h.a)(j.a.mark((function e(t,n,a){var c,r,o,i,l,s,d,u,b,h,m,x,O,g,v;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=[],r=85/n.length,o=10,i=0;case 4:if(!(i<n.length)){e.next=31;break}if(!(n[i].size>5e6)){e.next=7;break}throw new Error("".concat(n[i].name," filesize exceeds 5 MB"));case 7:return l=Object(p.a)(),e.next=10,Object(f.a)(n[i],["ModifyDate"]);case 10:return s=e.sent,d=C.ref("".concat(t,"/").concat(l,".jpg")),e.next=14,d.put(n[i]);case 14:return u=e.sent,e.next=17,u.ref.getDownloadURL();case 17:b=e.sent,h=b.match(/.+?(?=.jpg\?alt=media)/i),(m=n[i].name.match(/.+?(?=.jpg)/i))||(m=n[i].name.match(/.+?(?=.jpeg)/i)),x="".concat(h,"_1400x1000.jpeg?alt=media"),O="".concat(h,"_1400x1000.webp?alt=media"),g="".concat(h,"_400x700.jpeg?alt=media"),v="".concat(h,"_400x700.webp?alt=media"),c.push({id:l,filename:"".concat(m),filenameNumber:Number(n[i].name.match(/\d+/)),cloudUrl:x,cloudUrlWebp:O,thumbnail:g,thumbnailWebp:v,selected:!1,comment:"",dateTaken:s?s.ModifyDate:null}),a(o+=r);case 28:i++,e.next=4;break;case 31:return e.abrupt("return",c);case 32:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),I=function(){var e=Object(h.a)(j.a.mark((function e(t,n,a){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=v.collection("collections").doc(t).collection("photos").doc(n),e.next=3,c.update({selected:a});case 3:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),T=function(){var e=Object(h.a)(j.a.mark((function e(t,n,a){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=v.collection("collections").doc(t).collection("photos").doc(n),e.next=3,c.update({comment:a});case 3:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),q=function(){var e=Object(h.a)(j.a.mark((function e(t,n,a,c,r){var o,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=v.collection("collections").doc(t),i=v.collection("mail").doc(t),e.next=4,i.set({to:"arnas.savi@gmail.com",message:{subject:"".concat(n," is confirmed"),text:"Collection '".concat(n,"' is confirmed. URL: ").concat(a),html:"\n      <h1>".concat(n," is confirmed</h1>\n      <p>Selected photos: ").concat(c,"</p>\n      <p>Final comment: ").concat(r,"</p>\n      <p>You can see the selections here: <a href='").concat(a,"'>").concat(a,"</a></p>\n      ")}});case 4:return e.next=6,o.update({status:"confirmed",finalComment:r||""});case 6:case"end":return e.stop()}}),e)})));return function(t,n,a,c,r){return e.apply(this,arguments)}}(),B=function(){var e=Object(h.a)(j.a.mark((function e(t,n,a){var c,r,o,i,l,s,d,u;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a(1),c=v.collection("collections").doc(t).collection("photos"),r=100/n.length,o=0,i=Object(m.a)(n),e.prev=5,i.s();case 7:if((l=i.n()).done){e.next=25;break}return s=l.value,d=C.ref(t),u=c.doc(s),e.next=13,d.child("".concat(s,"_1400x1000.jpeg")).delete();case 13:return e.next=15,d.child("".concat(s,"_1400x1000.webp")).delete();case 15:return e.next=17,d.child("".concat(s,"_400x700.jpeg")).delete();case 17:return e.next=19,d.child("".concat(s,"_400x700.webp")).delete();case 19:return e.next=21,u.delete();case 21:a(o+=r);case 23:e.next=7;break;case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(5),i.e(e.t0);case 30:return e.prev=30,i.f(),e.finish(30);case 33:return e.abrupt("return");case 34:case"end":return e.stop()}}),e,null,[[5,27,30,33]])})));return function(t,n,a){return e.apply(this,arguments)}}(),N=function(){var e=Object(h.a)(j.a.mark((function e(t,n){var a,c,r,o,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=v.collection("collections").doc(t).collection("photos"),c=v.batch(),r=Object(m.a)(n);try{for(r.s();!(o=r.n()).done;)i=o.value,c.update(a.doc(i.id),{selected:!1,comment:""})}catch(dn){r.e(dn)}finally{r.f()}return e.next=6,c.commit();case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),P=function(){var e=Object(h.a)(j.a.mark((function e(t,n){var a,c,r,o,i,l,s,d,u,b;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(1),a=v.collection("collections").doc(t).collection("photos"),c=v.collection("collections").doc(t),e.next=5,a.get();case 5:r=e.sent,o=100/r.size,i=0,l=Object(m.a)(r.docs),e.prev=9,l.s();case 11:if((s=l.n()).done){e.next=29;break}return d=s.value,u=C.ref(t),b=a.doc(d.data().id),e.next=17,u.child("".concat(d.data().id,"_1400x1000.jpeg")).delete();case 17:return e.next=19,u.child("".concat(d.data().id,"_1400x1000.webp")).delete();case 19:return e.next=21,u.child("".concat(d.data().id,"_400x700.jpeg")).delete();case 21:return e.next=23,u.child("".concat(d.data().id,"_400x700.webp")).delete();case 23:return e.next=25,b.delete();case 25:n(i+=o);case 27:e.next=11;break;case 29:e.next=34;break;case 31:e.prev=31,e.t0=e.catch(9),l.e(e.t0);case 34:return e.prev=34,l.f(),e.finish(34);case 37:return e.next=39,c.delete();case 39:return z(t),e.abrupt("return");case 41:case"end":return e.stop()}}),e,null,[[9,31,34,37]])})));return function(t,n){return e.apply(this,arguments)}}(),E=function(){var e=Object(h.a)(j.a.mark((function e(){var t,n,a,c,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,v.collection("collections").orderBy("dateCreated","desc").get();case 3:n=e.sent,a=Object(m.a)(n.docs),e.prev=5,r=j.a.mark((function e(){var n,a,r,o,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.value,e.next=3,v.collection("collections").doc(n.id).collection("photos").orderBy("dateTaken").get();case 3:a=e.sent,r=[],o=1,a.forEach((function(e){var t={index:o,id:e.data().id,cloudUrl:e.data().cloudUrl,cloudUrlWebp:e.data().cloudUrlWebp,thumbnail:e.data().thumbnail,thumbnailWebp:e.data().thumbnailWebp,filename:e.data().filename,filenameNumber:e.data().filenameNumber,selected:e.data().selected,comment:e.data().comment,dateTaken:e.data().dateTaken};r.push(t),o++})),i={id:n.id,title:n.data().title,dateCreated:n.data().dateCreated,minSelect:n.data().minSelect,maxSelect:n.data().maxSelect,allowComments:n.data().allowComments,status:n.data().status,finalComment:n.data().finalComment,photos:r},t.push(i);case 9:case"end":return e.stop()}}),e)})),a.s();case 8:if((c=a.n()).done){e.next=12;break}return e.delegateYield(r(),"t0",10);case 10:e.next=8;break;case 12:e.next=17;break;case 14:e.prev=14,e.t1=e.catch(5),a.e(e.t1);case 17:return e.prev=17,a.f(),e.finish(17);case 20:return e.abrupt("return",t);case 21:case"end":return e.stop()}}),e,null,[[5,14,17,20]])})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(h.a)(j.a.mark((function e(t){var n,a,c,r,o,i,l,s,d,u,b,h;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.collection("collections").doc(t).get();case 2:if((s=e.sent).exists){e.next=5;break}throw new Error("collection doesn't exist");case 5:return e.next=7,v.collection("collections").doc(t).collection("photos").orderBy("dateTaken").get();case 7:return d=e.sent,u=[],b=1,d.forEach((function(e){var t={index:b,id:e.data().id,cloudUrl:e.data().cloudUrl,cloudUrlWebp:e.data().cloudUrlWebp,thumbnail:e.data().thumbnail,thumbnailWebp:e.data().thumbnailWebp,filename:e.data().filename,filenameNumber:e.data().filenameNumber,selected:e.data().selected,comment:e.data().comment,dateTaken:e.data().dateTaken};u.push(t),b++})),h={id:s.id,title:null===(n=s.data())||void 0===n?void 0:n.title,dateCreated:null===(a=s.data())||void 0===a?void 0:a.dateCreated,minSelect:null===(c=s.data())||void 0===c?void 0:c.minSelect,maxSelect:null===(r=s.data())||void 0===r?void 0:r.maxSelect,allowComments:null===(o=s.data())||void 0===o?void 0:o.allowComments,status:null===(i=s.data())||void 0===i?void 0:i.status,finalComment:null===(l=s.data())||void 0===l?void 0:l.finalComment,photos:u},e.abrupt("return",h);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(h.a)(j.a.mark((function e(t,n){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=v.collection("collections").doc(t),e.next=3,a.update({status:n});case 3:"editing"===n&&z(t);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),z=function(){var e=Object(h.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=v.collection("mail").doc(t),e.next=3,n.get();case 3:e.sent.exists&&n.delete();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=n(113),W=n.n(G),A=n(223),F=n(271),M=n(272),U=n(273),V=n(274),Y=n(275),H=n(276),Q=n(277),Z=n(289),J=n(262),K=n(74),X=n.n(K),$=n(257),ee=n(261),te=n(263),ne=n(264),ae=n(265),ce=n(266),re=n(224),oe=n(135),ie=n.n(oe),le=n(42),se=n.n(le),de=n(1),ue=function(e){var t=e.dialogOpen,n=e.progress,a=e.onClickCancel,c=e.onClickAgree,r=e.dialogTitle,o=e.dialogContentText;return Object(de.jsxs)($.a,{open:t,children:[Object(de.jsx)(ee.a,{id:"alert-dialog-title",children:r}),Object(de.jsx)(J.a,{onClick:a,className:ie.a.exitBtn,children:Object(de.jsx)(se.a,{})}),Object(de.jsxs)(te.a,{children:[Object(de.jsx)(ne.a,{id:"alert-dialog-description",children:o}),n?Object(de.jsx)(ae.a,{variant:"determinate",value:n}):null]}),Object(de.jsxs)(ce.a,{children:[Object(de.jsx)(re.a,{disabled:!!n,onClick:a,color:"primary",autoFocus:!0,children:"Cancel"}),Object(de.jsx)(re.a,{disabled:!!n,onClick:c,color:"secondary",children:"Yes"})]})]})},be=n(141),je=n.n(be),he=n(142),me=n.n(he),xe=n(143),pe=n.n(xe),fe=function(e){switch(e.status){case"editing":return Object(de.jsx)(Z.a,{title:"Editing",children:Object(de.jsx)(je.a,{})});case"selecting":return Object(de.jsx)(Z.a,{title:"Selecting",children:Object(de.jsx)(me.a,{})});case"confirmed":return Object(de.jsx)(Z.a,{title:"Confirmed",children:Object(de.jsx)(pe.a,{})});default:return Object(de.jsx)("div",{children:"N/A"})}},Oe=n(23),ge=function(){var e=Object(a.useState)(null),t=Object(i.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(0),o=Object(i.a)(r,2),l=o[0],s=o[1],d=Object(a.useState)(!1),b=Object(i.a)(d,2),m=b[0],x=b[1],p=Object(a.useState)(""),f=Object(i.a)(p,2),O=f[0],g=f[1],v=Object(a.useState)(""),C=Object(i.a)(v,2),S=C[0],w=C[1],y=Object(u.f)(),k=Object(Oe.b)().enqueueSnackbar;Object(a.useEffect)((function(){E().then((function(e){return c(e)})).catch((function(e){k("ERROR: Getting collections failed. Please refresh the page",{variant:"error",persist:!0})}))}),[k]);var _=function(){var e=Object(h.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P(O,s);case 3:x(!1),s(0),n&&(t=n.filter((function(e){return e.id!==O})))&&c(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),k("ERROR: Photo deletion failed",{variant:"error"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),R=function(e){y.push("edit/".concat(e))};return null===n?Object(de.jsx)(A.a,{open:!0,children:Object(de.jsx)(F.a,{color:"inherit"})}):Object(de.jsxs)("div",{className:W.a.tableContainer,children:[Object(de.jsx)(M.a,{children:Object(de.jsxs)(U.a,{children:[Object(de.jsx)(V.a,{children:Object(de.jsxs)(Y.a,{children:[Object(de.jsx)(H.a,{width:"10%",children:"first image"}),Object(de.jsx)(H.a,{width:"30%",children:"name"}),Object(de.jsx)(H.a,{width:"20%",children:"status"}),Object(de.jsx)(H.a,{children:"selected photos"}),Object(de.jsx)(H.a,{})]})}),Object(de.jsx)(Q.a,{children:n.map((function(e){return Object(de.jsxs)(Y.a,{hover:!0,children:[Object(de.jsx)(H.a,{onClick:function(){return R(e.id)},children:e.photos[0]?Object(de.jsxs)("picture",{children:[Object(de.jsx)("source",{srcSet:e.photos[0].thumbnailWebp,type:"image/webp"}),Object(de.jsx)("img",{src:e.photos[0].thumbnail,alt:"first collection img",className:W.a.thumbnail})]}):null}),Object(de.jsx)(H.a,{onClick:function(){return R(e.id)},children:e.title}),Object(de.jsx)(H.a,{onClick:function(){return R(e.id)},children:Object(de.jsx)(fe,{status:e.status})}),Object(de.jsxs)(H.a,{onClick:function(){return R(e.id)},children:[(t=e.photos,t.filter((function(e){return e.selected})).length)," / ",e.photos.length]}),Object(de.jsx)(H.a,{align:"right",children:Object(de.jsx)(Z.a,{title:"Delete",children:Object(de.jsx)(J.a,{color:"inherit","aria-label":"delete",onClick:function(){return function(e){if(x(!0),g(e),n){var t=n.find((function(t){return t.id===e}));t&&w(t.title)}}(e.id)},children:Object(de.jsx)(X.a,{})})})})]},e.id);var t}))})]})}),Object(de.jsx)(ue,{dialogOpen:m,progress:l,onClickCancel:function(){return x(!1)},onClickAgree:_,dialogTitle:"Do you really want to delete collection '".concat(S,"'?"),dialogContentText:"Delete action cannot be reverted!"})]})},ve=n(122),Ce=function(){return Object(de.jsxs)("div",{children:[Object(de.jsx)(ve.a,{variant:"h4",children:"Collections"}),Object(de.jsxs)("div",{className:"horizontalButtons",children:[Object(de.jsx)(re.a,{to:"/settings",component:d.b,variant:"outlined",children:"Settings"}),Object(de.jsx)(re.a,{to:"/new",component:d.b,variant:"outlined",children:"Create New Collection"})]}),Object(de.jsx)(ge,{})]})},Se=n(19),we=n(116),ye=n.n(we),ke=n(34),_e=n(286),Re=n(285),Ie=n(278),Te=n(287),qe=n(102),Be=function(){var e=Object(ke.b)(),t=e.register,n=e.handleSubmit,c=e.watch,r=e.errors,o=e.getValues,l=e.control,s=Object(a.useState)(!1),b=Object(i.a)(s,2),m=b[0],x=b[1],p=Object(a.useState)(0),f=Object(i.a)(p,2),O=f[0],g=f[1],v=Object(u.f)(),C=Object(Oe.b)().enqueueSnackbar,w=c("minSelectRequired"),y=c("maxSelectRequired"),k=function(){var e=Object(h.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,x(!0),e.next=4,S({title:t.title,minSelect:{required:t.minSelectRequired,goal:t.minSelectGoal},maxSelect:{required:t.maxSelectRequired,goal:t.maxSelectGoal},allowComments:t.allowComments},t.files,g);case 4:n=e.sent,x(!1),v.push("/edit/".concat(n)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),C("ERROR: Creating new collection failed",{variant:"error"});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(de.jsxs)("div",{children:[Object(de.jsx)(ve.a,{variant:"h4",children:"New collection"}),Object(de.jsxs)("form",{onSubmit:n(k),children:[Object(de.jsxs)("div",{children:[Object(de.jsxs)("div",{className:"horizontalButtons",children:[Object(de.jsx)(re.a,{to:"/",component:d.b,color:"secondary",variant:"contained",children:"Cancel"}),Object(de.jsx)(re.a,{"aria-label":"create",id:"create",color:"primary",variant:"contained",type:"submit",children:"Create"})]}),m?Object(de.jsx)(_e.a,{"data-testid":"uploading",p:"8px",children:Object(de.jsx)(ae.a,{variant:"determinate",value:O})}):Object(de.jsx)(_e.a,{p:"10px"})]}),Object(de.jsx)(Re.a,{id:"title",name:"title",inputRef:t({required:!0,maxLength:50}),variant:"outlined",label:"Title",error:!!r.title,helperText:r.title?"Title is required":" "}),Object(de.jsx)("div",{children:Object(de.jsx)(Ie.a,{control:Object(de.jsx)(Te.a,{name:"allowComments",inputRef:t}),label:"Allow comments"})}),Object(de.jsx)(ve.a,{variant:"body1",children:"selection goals:"}),Object(de.jsxs)("div",{children:[Object(de.jsx)(Ie.a,{control:Object(de.jsx)(Te.a,{name:"minSelectRequired",inputRef:t}),label:"minimum"}),Object(de.jsx)("div",{style:{display:w?"inline":"none"},children:Object(de.jsx)(Re.a,{"data-testid":"minSelectGoal",name:"minSelectGoal",type:"number",variant:"outlined",size:"small",InputProps:{inputProps:{max:999,min:1}},inputRef:t({min:"1",max:"999",valueAsNumber:!0,validate:{lowerThanMax:function(e){return!o("maxSelectRequired")||!o("minSelectRequired")||o("maxSelectGoal")>=e}}}),error:!!r.minSelectGoal,helperText:r.minSelectGoal&&"Must be higher than maximum value"})})]}),Object(de.jsxs)("div",{children:[Object(de.jsx)(Ie.a,{control:Object(de.jsx)(Te.a,{name:"maxSelectRequired",inputRef:t}),label:"maximum"}),Object(de.jsx)("div",{style:{display:y?"inline":"none"},children:Object(de.jsx)(Re.a,{"data-testid":"maxSelectGoal",name:"maxSelectGoal",type:"number",variant:"outlined",size:"small",InputProps:{inputProps:{max:999,min:1}},inputRef:t({min:"1",max:"999",valueAsNumber:!0,validate:{higherThanMin:function(e){return!o("minSelectRequired")||!o("maxSelectRequired")||o("minSelectGoal")<=e}}}),error:!!r.maxSelectGoal,helperText:r.maxSelectGoal&&"Must be higher than minimum value"})})]}),Object(de.jsx)("div",{className:ye.a.dropzoneError,children:Object(de.jsx)(ve.a,{variant:"body1",children:r.files?"Images are required":Object(de.jsx)(a.Fragment,{children:"\u200b"})})}),Object(de.jsx)(ke.a,{name:"files",control:l,defaultValue:[],rules:{validate:{notEmpty:function(e){return e.length>0}}},render:function(e){var t=e.onChange;return Object(de.jsx)(qe.a,{acceptedFiles:["image/jpeg"],dropzoneText:"Drop images or click to upload here",onChange:function(e){return t(Object(Se.a)(e))},filesLimit:999,previewGridClasses:{item:"itemReference"},previewGridProps:{container:{spacing:1},item:{sm:2,lg:1,md:1}},showAlerts:!1,showPreviewsInDropzone:!1,showPreviews:!0,showFileNamesInPreview:!0,dropzoneClass:"dropzoneClass ".concat(r.files&&ye.a.dropzoneErrorBorder)})}})]})]})},Ne=n(88),Pe=n.n(Ne),Ee=n(290),De=function(e){var t=e.logoWidth,n=e.setLogoUrl,c=e.setLogoWidth,r=Object(ke.b)(),o=r.register,l=r.handleSubmit,s=r.control,d=r.errors,b=Object(a.useState)(!1),m=Object(i.a)(b,2),x=m[0],p=m[1],f=Object(a.useState)(0),O=Object(i.a)(f,2),g=O[0],v=O[1],C=Object(u.f)(),S=Object(a.useRef)(t),w=Object(Oe.b)().enqueueSnackbar,k=function(){var e=Object(h.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(!0),e.next=4,y(t.logoFile,t.logoWidth,v);case 4:p(!1),C.push("/"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),w("ERROR: Saving settings failed",{variant:"error"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(de.jsxs)("div",{children:[Object(de.jsx)(ve.a,{variant:"h4",children:"Settings"}),Object(de.jsxs)("form",{onSubmit:l(k),children:[Object(de.jsxs)("div",{className:"horizonalButtons",children:[Object(de.jsx)(re.a,{onClick:function(){C.push("/"),c(S.current)},color:"secondary",variant:"contained",children:"Cancel"})," ",Object(de.jsx)(re.a,{"aria-label":"save",id:"save",variant:"contained",color:"primary",type:"submit",disabled:x,children:"Save"})]}),Object(de.jsx)("div",{className:Pe.a.dropzoneError,children:Object(de.jsx)(ve.a,{variant:"body1",children:d.logoFile?"Images are required":Object(de.jsx)(a.Fragment,{children:"\u200b"})})}),Object(de.jsx)(ve.a,{variant:"h6",children:"Select new logo:"}),Object(de.jsxs)(re.a,{className:Pe.a.fileInputBtn,variant:"outlined",children:[Object(de.jsx)("input",{name:"logoFile",ref:o,type:"file",className:Pe.a.customFileInput,onChange:function(e){e&&e.target&&e.target.files&&n(URL.createObjectURL(e.target.files[0]))}}),"Upload"]}),Object(de.jsx)(ve.a,{variant:"h6",children:"Select logo width:"}),Object(de.jsx)(ke.a,{name:"logoWidth",control:s,defaultValue:S.current,render:function(e){var t=e.onChange;return Object(de.jsx)(_e.a,{children:Object(de.jsx)(Ee.a,{className:Pe.a.slider,ref:o,defaultValue:S.current,"aria-labelledby":"discrete-slider-small-steps",step:1,min:0,max:500,valueLabelDisplay:"auto",onChange:function(e,n){t(n),function(e){c(e)}(n)},color:"secondary"})})}}),Object(de.jsx)("div",{children:x?Object(de.jsx)(_e.a,{"data-testid":"uploading",p:"3px",children:Object(de.jsx)(ae.a,{variant:"determinate",value:g})}):Object(de.jsx)(_e.a,{p:"5px"})})]})]})},Le=function(){var e=Object(ke.b)(),t=e.register,n=e.handleSubmit,a=e.errors,c=e.setError,r=Object(Oe.b)().enqueueSnackbar,o=function(){var e=Object(h.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.signInWithEmailAndPassword(t.email,t.password);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),"auth/wrong-password"===e.t0.code?(c("email",{message:" "}),c("password",{message:"Email or password is incorrect"})):r("ERROR: Login failed",{variant:"error"});case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}();return Object(de.jsxs)("div",{children:[Object(de.jsx)(ve.a,{variant:"h4",children:"Sign In"}),Object(de.jsx)(_e.a,{mt:3,children:Object(de.jsxs)("form",{onSubmit:n(o),children:[Object(de.jsx)("div",{children:Object(de.jsx)(Re.a,{id:"email",variant:"outlined",name:"email",label:"Email",inputRef:t({required:!0}),error:!!a.email,helperText:a.email?a.email.message||"Email is required":" "})}),Object(de.jsx)("div",{children:Object(de.jsx)(Re.a,{id:"password",type:"password",variant:"outlined",name:"password",label:"Password",inputRef:t({required:!0}),error:!!a.password,helperText:a.password?a.password.message||"Password is required":" "})}),Object(de.jsx)("div",{children:Object(de.jsx)(re.a,{"aria-label":"signIn",type:"submit",variant:"outlined",children:"Sign In"})})]})})]})},ze=n(118),Ge=n.n(ze),We=n(158),Ae=n.n(We),Fe=n(89),Me=n.n(Fe),Ue=n(63),Ve=n.n(Ue),Ye=n(68),He=n.n(Ye),Qe=n(75),Ze=n.n(Qe),Je=n(67),Ke=n.n(Je),Xe=n(151),$e=n.n(Xe),et=n(104),tt=n(152),nt=function(e){var t=e.filteredPhotos,n=e.lightboxOpen,c=e.setLightboxOpen,r=e.lightboxIndex,o=e.setLightboxIndex,i=e.toolbarButtons;Object(a.useEffect)((function(){window.innerHeight<document.body.clientHeight&&(document.body.style.overflow=n?"hidden":"overlay")}),[n]);var l=document.querySelector("#root");return n?Object(de.jsx)(tt.a,{mainSrc:et.isWebpSupported?t[r].cloudUrlWebp:t[r].cloudUrl,nextSrc:et.isWebpSupported?t[(r+1)%t.length].cloudUrlWebp:t[(r+1)%t.length].cloudUrl,prevSrc:et.isWebpSupported?t[(r+t.length-1)%t.length].cloudUrlWebp:t[(r+t.length-1)%t.length].cloudUrl,onCloseRequest:function(){l instanceof HTMLElement&&(l.style.filter=""),c(!1)},onMovePrevRequest:function(){return o((r+t.length-1)%t.length)},onMoveNextRequest:function(){return o((r+1)%t.length)},toolbarButtons:i,enableZoom:!1,imageTitle:Object(de.jsx)(ve.a,{classes:{root:$e.a.photoIndex},children:t[r].index}),onImageLoad:function(){setTimeout((function(){l instanceof HTMLElement&&(l.style.filter="blur(10px)")}),100)},animationDisabled:!0}):Object(de.jsx)(de.Fragment,{})},at=n(119),ct=n.n(at),rt=function(e){var t=e.commentOpen,n=e.setCommentOpen,a=e.commentTextarea,c=e.setCommentTextarea,r=e.actionButtons,o=e.disabled;return Object(de.jsxs)($.a,{open:t,onClose:function(){return n(!1)},children:[Object(de.jsx)(J.a,{onClick:function(){return n(!1)},className:ct.a.exitBtn,children:Object(de.jsx)(se.a,{})}),Object(de.jsx)(ee.a,{id:"alert-dialog-title",children:"Comment"}),Object(de.jsx)(te.a,{children:Object(de.jsx)(Re.a,{classes:o?{root:ct.a.disabledTextarea}:void 0,multiline:!0,rows:4,variant:"outlined",value:a,onChange:function(e){e.preventDefault(),c&&c(e.target.value)},disabled:o})}),Object(de.jsx)(ce.a,{children:r})]})},ot=n(24),it=n(52),lt=n.n(it),st=n(154),dt=n.n(st),ut=function(e){var t=e.collectionId,n=e.collection,a=e.setCollection,c=e.filteredPhotos,r=e.openLightbox,o=e.openCommentModal,i=Object(Oe.b)().enqueueSnackbar;return Object(de.jsx)(dt.a,{breakpointCols:{default:5,1600:4,1100:3,700:2,430:1},className:lt.a.masonryGrid,columnClassName:lt.a.masonryGridColumn,children:c.map((function(e,c){return Object(de.jsx)("div",{className:lt.a.photoThumbnailGrid,children:Object(de.jsxs)("div",{className:lt.a.imgBorder,children:[Object(de.jsxs)("picture",{children:[Object(de.jsx)("source",{srcSet:e.thumbnailWebp,type:"image/webp"}),Object(de.jsx)("img",{src:e.thumbnail,alt:n.title,onClick:function(){return r(Number(c))}})]}),Object(de.jsx)("div",{className:lt.a.photoIndex,children:e.index}),"selecting"===n.status?Object(de.jsxs)("div",{children:[n.allowComments?Object(de.jsx)(J.a,{"aria-label":"comment",className:e.comment.length>0?lt.a.commentBtnFilled:lt.a.commentBtn,onClick:function(){return o(c)},children:e.comment.length>0?Object(de.jsx)(Ke.a,{}):Object(de.jsx)(Ze.a,{})}):null,Object(de.jsx)(J.a,{"aria-label":"select",className:e.selected?lt.a.heartBtnSelected:lt.a.heartBtn,onClick:(l=e.id,function(){var e=Object(h.a)(j.a.mark((function e(c){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!((r=null===n||void 0===n?void 0:n.photos.find((function(e){return e.id===l})))&&n&&a&&t)){e.next=7;break}return e.next=5,I(t,l,!r.selected);case 5:r.selected=!(null===r||void 0===r?void 0:r.selected),a(Object(ot.a)(Object(ot.a)({},n),{},{photos:n.photos.map((function(e){return e.id===l?r:e}))}));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),i("ERROR: Photo selection failed",{variant:"error"});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()),children:e.selected?Object(de.jsx)(He.a,{}):Object(de.jsx)(Ve.a,{})})]}):Object(de.jsxs)("div",{children:[e.comment.length>0&&n.allowComments?Object(de.jsx)(J.a,{"aria-label":"comment",className:lt.a.commentBtnFilled,onClick:function(){return o(c)},children:Object(de.jsx)(Ke.a,{})}):null,e.selected?Object(de.jsx)(J.a,{"aria-label":"select",className:lt.a.heartBtnSelected,disabled:!0,children:Object(de.jsx)(He.a,{})}):null]})]})},e.id);var l}))})},bt=function(e){var t=e.collection,n=e.filteredPhotos,a=e.lightboxOpen,c=e.setLightboxOpen,r=e.openLightbox,o=e.openCommentModal,i=e.photoIndex,l=e.setPhotoIndex,s=e.commentOpen,d=e.setCommentOpen,u=e.commentTextarea;return Object(de.jsxs)("div",{children:[Object(de.jsx)(ut,{collection:t,filteredPhotos:n,openLightbox:r,openCommentModal:o}),n.length>0&&Object(de.jsx)(nt,{filteredPhotos:n,lightboxOpen:a,setLightboxOpen:c,lightboxIndex:i,setLightboxIndex:l,toolbarButtons:[Object(de.jsx)(J.a,{"aria-label":"selectLighbox",disabled:!0,children:n[i].selected?Object(de.jsx)(He.a,{className:Me.a.toolbarIcon}):Object(de.jsx)(Ve.a,{className:Me.a.toolbarIcon})}),t.allowComments?Object(de.jsx)(J.a,{"aria-label":"commentLightbox",onClick:function(){return o()},children:n[i].comment.length>0?Object(de.jsx)(Ke.a,{className:Me.a.toolbarIcon}):Object(de.jsx)(Ze.a,{className:Me.a.toolbarIcon})}):null]}),Object(de.jsx)(rt,{commentOpen:s,setCommentOpen:d,commentTextarea:u,disabled:!0})]})},jt=n(78),ht=n.n(jt),mt=n(155),xt=n.n(mt),pt=function(e){var t=e.collection,n=e.selectedPhotos,a=e.confirmForbidDialogOpen,c=e.setConfirmForbidDialogOpen;return Object(de.jsxs)($.a,{open:a,onClose:function(){return c(!1)},children:[Object(de.jsx)(ee.a,{id:"alert-dialog-title",children:"Please adjust your selections!"}),Object(de.jsx)(J.a,{onClick:function(){return c(!1)},className:xt.a.exitBtn,children:Object(de.jsx)(se.a,{})}),Object(de.jsx)(te.a,{children:Object(de.jsxs)(ne.a,{children:["You have selected ",Object(de.jsx)("strong",{children:n})," photos, but"," ",t.minSelect.required&&t.maxSelect.required?Object(de.jsxs)("span",{children:["you must select"," ",Object(de.jsxs)("strong",{children:["from ",t.minSelect.goal," to ",t.maxSelect.goal]})," ","photos."]}):t.minSelect.required&&!t.maxSelect.required?Object(de.jsxs)("span",{children:["you must select ",Object(de.jsxs)("strong",{children:["at least ",t.minSelect.goal]})," ","photos."]}):!t.minSelect.required&&t.maxSelect.required?Object(de.jsxs)("span",{children:["you must select"," ",Object(de.jsxs)("strong",{children:["a maximum of ",t.maxSelect.goal]})," photos."]}):void 0]})}),Object(de.jsx)(ce.a,{children:Object(de.jsx)(re.a,{onClick:function(){return c(!1)},color:"primary",autoFocus:!0,children:"Cancel"})})]})},ft=n(156),Ot=n.n(ft),gt=function(e){var t=e.collection,n=e.setCollection,a=e.collectionId,c=e.selectedPhotos,r=e.confirmDialogOpen,o=e.setConfirmDialogOpen,i=Object(ke.b)({defaultValues:{files:[]}}),l=i.register,s=i.handleSubmit,d=Object(Oe.b)().enqueueSnackbar,u=function(){var e=Object(h.a)(j.a.mark((function e(r){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q(a,t.title,"".concat(window.location.origin.toString(),"/photoproof/edit/").concat(a),c,r.finalComment);case 3:o(!1),n(Object(ot.a)(Object(ot.a)({},t),{},{status:"confirmed",finalComment:r.finalComment})),d("Collection confirmed successfully, thank you!",{variant:"default"}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),d("ERROR: Confirming collection failed",{variant:"error"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(de.jsx)($.a,{open:r,onClose:function(){return o(!1)},children:Object(de.jsxs)("form",{onSubmit:s(u),children:[Object(de.jsx)(ee.a,{id:"alert-dialog-title",children:"Confirm selections"}),Object(de.jsx)(J.a,{onClick:function(){return o(!1)},className:Ot.a.exitBtn,children:Object(de.jsx)(se.a,{})}),Object(de.jsxs)(te.a,{children:[Object(de.jsxs)(ne.a,{children:["You have selected ",Object(de.jsxs)("strong",{children:[c," photos"]}),"."]}),Object(de.jsx)(ne.a,{children:"Do you want to leave a final comment?"}),Object(de.jsx)(Re.a,{multiline:!0,rows:3,fullWidth:!0,variant:"outlined",placeholder:"Final comment",name:"finalComment",inputRef:l}),Object(de.jsxs)(ne.a,{children:[Object(de.jsx)("strong",{children:"Warning:"})," you will not be able to select more photos after confirming!"]})]}),Object(de.jsxs)(ce.a,{children:[Object(de.jsx)(re.a,{onClick:function(){return o(!1)},color:"secondary",autoFocus:!0,children:"Cancel"}),Object(de.jsx)(re.a,{type:"submit",color:"primary",children:"Confirm"})]})]})})},vt=function(e){var t=e.collection,n=e.setCollection,c=e.collectionId,r=e.filteredPhotos,o=e.lightboxOpen,l=e.setLightboxOpen,s=e.openLightbox,d=e.openCommentModal,u=e.photoIndex,b=e.setPhotoIndex,m=e.commentOpen,x=e.setCommentOpen,p=e.commentTextarea,f=e.setCommentTextarea,O=e.selectedPhotos,g=Object(a.useState)(!1),v=Object(i.a)(g,2),C=v[0],S=v[1],w=Object(a.useState)(!1),y=Object(i.a)(w,2),k=y[0],_=y[1],R=Object(Oe.b)().enqueueSnackbar;Object(a.useEffect)((function(){if(o){var e=document.querySelector(".ReactModalPortal");if(e)return e.addEventListener("keyup",N),function(){return e.removeEventListener("keyup",N)}}}),[o,u]);var q=function(){var e=Object(h.a)(j.a.mark((function e(){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r||!t){e.next=13;break}if(e.prev=1,!(a=r[u])||!t){e.next=8;break}return e.next=6,I(c,a.id,!a.selected);case 6:a.selected=!(null===a||void 0===a?void 0:a.selected),n(Object(ot.a)(Object(ot.a)({},t),{},{photos:t.photos.map((function(e){return e.id===a.id?a:e}))}));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),R("ERROR: Photo selection failed",{variant:"error"});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(h.a)(j.a.mark((function e(){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x(!1),!r||!t){e.next=14;break}if(e.prev=2,!(a=r[u])||!t){e.next=9;break}return e.next=7,T(c,a.id,p);case 7:a.comment=p,n(Object(ot.a)(Object(ot.a)({},t),{},{photos:t.photos.map((function(e){return e.id===a.id?a:e}))}));case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),R("ERROR: Photo commenting failed",{variant:"error"});case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}(),N=function(e){o&&("ArrowUp"!==e.code||r[u].selected?"ArrowDown"===e.code&&r[u].selected&&q():q())};return Object(de.jsxs)("div",{children:[Object(de.jsx)(ut,{collectionId:c,collection:t,setCollection:n,filteredPhotos:r,openLightbox:s,openCommentModal:d}),r.length>0&&Object(de.jsx)(nt,{filteredPhotos:r,lightboxOpen:o,setLightboxOpen:l,lightboxIndex:u,setLightboxIndex:b,toolbarButtons:[Object(de.jsx)(J.a,{"aria-label":"selectLighbox",onClick:q,children:r[u].selected?Object(de.jsx)(He.a,{className:ht.a.toolbarIcon}):Object(de.jsx)(Ve.a,{className:ht.a.toolbarIcon})}),t.allowComments?Object(de.jsx)(J.a,{"aria-label":"commentLightbox",onClick:function(){return d()},children:r[u].comment.length>0?Object(de.jsx)(Ke.a,{className:ht.a.toolbarIcon}):Object(de.jsx)(Ze.a,{className:ht.a.toolbarIcon})}):null]}),Object(de.jsx)(rt,{commentOpen:m,setCommentOpen:x,commentTextarea:p,setCommentTextarea:f,disabled:!t.allowComments,actionButtons:[Object(de.jsx)(re.a,{onClick:function(){return x(!1)},color:"secondary",autoFocus:!0,children:"Cancel"},"cancel"),Object(de.jsx)(re.a,{onClick:B,color:"primary",children:"Save"},"save")]}),Object(de.jsxs)(re.a,{variant:"contained",classes:{root:ht.a.fixedBtn},onClick:function(){if(null!=O)return t.minSelect.required&&O<t.minSelect.goal||t.maxSelect.required&&O>t.maxSelect.goal?_(!0):S(!0)},children:["confirm ",O," selections"]}),Object(de.jsx)(pt,{collection:t,selectedPhotos:O,confirmForbidDialogOpen:k,setConfirmForbidDialogOpen:_}),Object(de.jsx)(gt,{collection:t,setCollection:n,collectionId:c,selectedPhotos:O,confirmDialogOpen:C,setConfirmDialogOpen:S})]})},Ct=n(157),St=n.n(Ct),wt=n(279),yt=function(e){var t=e.collection,n=e.setFilteredPhotos,c=e.setLightboxOpen,r=e.photoIndex,o=e.setPhotoIndex,l=Object(a.useState)("all"),s=Object(i.a)(l,2),d=s[0],u=s[1],b=function(e){c&&r&&o&&(0===e.length?c(!1):e.length<=r&&o(e.length-1))},j=function(){var e=t.photos.length,n=t.photos.filter((function(e){return e.selected})).length;return{all:e,selected:n,notSelected:e-n}}();return Object(a.useEffect)((function(){if(t)switch(d){case"all":return n(t.photos);case"selected":var e=t.photos.filter((function(e){return e.selected}));return b(e),n(e);case"unselected":var a=t.photos.filter((function(e){return!e.selected}));return b(a),n(a)}}),[d,t]),Object(de.jsxs)(wt.a,{className:St.a.filterBtns,"aria-label":"outlined primary button group",children:[Object(de.jsxs)(re.a,{variant:"selected"===d?"contained":void 0,onClick:function(){return u("selected")},children:["Selected \xa0\xa0",j.selected]}),Object(de.jsxs)(re.a,{variant:"all"===d?"contained":void 0,onClick:function(){return u("all")},children:["All \xa0\xa0",j.all]}),Object(de.jsxs)(re.a,{variant:"unselected"===d?"contained":void 0,onClick:function(){return u("unselected")},children:["Not Selected \xa0\xa0",j.notSelected]})]})},kt=function(){var e=Object(u.g)().id,t=Object(a.useState)(null),n=Object(i.a)(t,2),c=n[0],r=n[1],o=Object(a.useState)([]),l=Object(i.a)(o,2),s=l[0],d=l[1],b=Object(a.useState)(!1),j=Object(i.a)(b,2),h=j[0],m=j[1],x=Object(a.useState)(0),p=Object(i.a)(x,2),f=p[0],O=p[1],g=Object(a.useState)(""),v=Object(i.a)(g,2),C=v[0],S=v[1],w=Object(a.useState)(!1),y=Object(i.a)(w,2),k=y[0],_=y[1],R=Object(u.f)();Object(a.useEffect)((function(){D(e).then((function(e){r(e),d(e.photos)})).catch((function(e){R.push("/error")}))}),[e]);var I=function(e){_(!0),s&&(e?(O(e),S(s[e].comment)):S(s[f].comment))},T=function(e){O(e),m(!0)},q=null===c||void 0===c?void 0:c.photos.filter((function(e){return e.selected})).length;return null===c?Object(de.jsx)(A.a,{open:!0,children:Object(de.jsx)(F.a,{color:"inherit"})}):Object(de.jsxs)("div",{children:[Object(de.jsxs)(ve.a,{variant:"h4",children:[c.title," ","selecting"!==c.status&&Object(de.jsx)(Ae.a,{})]}),Object(de.jsx)("div",{children:Object(de.jsxs)("div",{className:Ge.a.horizontal,children:[Object(de.jsx)("div",{className:Ge.a.selectedDetails,children:c.minSelect.required&&c.maxSelect.required?Object(de.jsxs)(ve.a,{children:["You must select from ",c.minSelect.goal," to"," ",c.maxSelect.goal," photos"]}):c.minSelect.required&&!c.maxSelect.required?Object(de.jsxs)(ve.a,{children:["You must select at least ",c.minSelect.goal," photos"]}):!c.minSelect.required&&c.maxSelect.required?Object(de.jsxs)(ve.a,{children:["You must select a maximum of ",c.maxSelect.goal," photos"]}):null}),Object(de.jsx)(yt,{collection:c,setFilteredPhotos:d,modifyLightbox:!0,setLightboxOpen:m,photoIndex:f,setPhotoIndex:O})]})}),0===c.photos.length?Object(de.jsx)("div",{children:"no photos in collection"}):0===s.length?Object(de.jsx)("div",{children:"no photos in this filter"}):null,"selecting"===c.status?Object(de.jsx)(vt,{collection:c,setCollection:r,collectionId:e,filteredPhotos:s,lightboxOpen:h,setLightboxOpen:m,openLightbox:T,openCommentModal:I,photoIndex:f,setPhotoIndex:O,commentOpen:k,setCommentOpen:_,commentTextarea:C,setCommentTextarea:S,selectedPhotos:q}):Object(de.jsx)(bt,{collection:c,filteredPhotos:s,lightboxOpen:h,setLightboxOpen:m,openLightbox:T,openCommentModal:I,photoIndex:f,setPhotoIndex:O,commentOpen:k,setCommentOpen:_,commentTextarea:C})]})},_t=n(90),Rt=n.n(_t),It=n(161),Tt=n.n(It),qt=n(160),Bt=n.n(qt),Nt=n(105),Pt=n.n(Nt),Et=n(221),Dt=function(e){var t=e.collectionId,n=e.collection,c=e.setCollection,r=e.setConfirmationDialogOpen,o=e.setConfirmationDialogTitle,l=e.setConfirmationDialogContentText,s=e.setConfirmationDialogAgree,u=e.setProgress,b=Object(a.useState)(!1),m=Object(i.a)(b,2),x=m[0],p=m[1],f=Object(Oe.b)().enqueueSnackbar,O=Object(ke.b)({defaultValues:{title:n.title,allowComments:n.allowComments,maxSelectRequired:n.maxSelect.required,minSelectRequired:n.minSelect.required,minSelectGoal:n.minSelect.goal,maxSelectGoal:n.maxSelect.goal}}),g=O.register,v=O.handleSubmit,C=O.watch,S=O.errors,y=O.getValues,k=O.control,_=C("minSelectRequired"),R=C("maxSelectRequired"),I=function(){var e=Object(h.a)(j.a.mark((function e(a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L(t,a);case 3:n&&c(Object(ot.a)(Object(ot.a)({},n),{},{status:a})),B(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),f("ERROR: Changing collection status failed",{variant:"error"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(h.a)(j.a.mark((function e(a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w({title:a.title,minSelect:{required:a.minSelectRequired,goal:a.minSelectGoal},maxSelect:{required:a.maxSelectRequired,goal:a.maxSelectGoal},allowComments:a.allowComments},t);case 3:n&&c(Object(ot.a)(Object(ot.a)({},n),{},{title:a.title,minSelect:{required:a.minSelectRequired,goal:a.minSelectGoal},maxSelect:{required:a.maxSelectRequired,goal:a.maxSelectGoal},allowComments:a.allowComments,status:"selecting"})),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),f("ERROR: Saving collection settings failed",{variant:"error"});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),q=function(e){if(n){var t=n.photos.filter((function(e){return e.selected})).map((function(e){return e.filename}));navigator.clipboard.writeText(t.join(" "))}p(!0),setTimeout((function(){p(!1)}),2e3),B()},B=function(){r(!1),o(""),l(""),s((function(){})),u(0)};return Object(de.jsxs)("div",{children:[Object(de.jsxs)("form",{onSubmit:v(T),children:[Object(de.jsxs)("div",{className:"horizontalButtons",children:[Object(de.jsx)(re.a,{to:"/",component:d.b,variant:"outlined",children:"Home"}),"editing"!==n.status?Object(de.jsx)(re.a,{color:"secondary",variant:"contained",onClick:"confirmed"===n.status?function(){r(!0),o("This collection is already confirmed"),l("Do you really want to edit an already confirmed collection?"),s((function(){return function(){return I("editing")}}))}:function(){return I("editing")},children:"Edit"}):Object(de.jsx)(re.a,{color:"primary",variant:"contained",type:"submit",children:"Save"})]}),"editing"===n.status?Object(de.jsx)("div",{children:Object(de.jsx)(Re.a,{label:"Title",id:"title",name:"title",defaultValue:n.title,variant:"outlined",classes:{root:Pt.a.titleTextarea},margin:"dense",inputRef:g({required:!0,maxLength:50}),error:!!S.title,helperText:S.title?"Title is required":" ",fullWidth:!0})}):Object(de.jsxs)("div",{className:Pt.a.titleBar,children:[Object(de.jsx)(fe,{status:n.status}),Object(de.jsx)(ve.a,{variant:"h4",children:n.title})]}),Object(de.jsxs)(ve.a,{children:["Client URL:"," ",Object(de.jsx)(Z.a,{title:x?"copied!":"copy",children:Object(de.jsx)(re.a,{onClick:function(e){var t=e.target;navigator.clipboard.writeText(t.innerHTML),p(!0),setTimeout((function(){p(!1)}),2e3)},children:"".concat(window.location.origin.toString(),"/photoproof/collection/").concat(t)})}),Object(de.jsx)(re.a,{to:"/collection/".concat(t),component:d.b,variant:"contained",size:"small",children:"Open"})]}),Object(de.jsxs)(_e.a,{className:"editing"===n.status?void 0:"noPointerEvents",mt:2,children:[Object(de.jsx)(ve.a,{variant:"h6",children:"Settings:"}),Object(de.jsx)("div",{children:Object(de.jsx)(Ie.a,{control:Object(de.jsx)(ke.a,{control:k,name:"allowComments",render:function(e,t){var a=e.onChange,c=e.onBlur,r=e.value,o=(e.name,e.ref);t.invalid,t.isTouched,t.isDirty;return Object(de.jsx)(Te.a,{onBlur:c,onChange:function(e){return a(e.target.checked)},checked:r,inputRef:o,disabled:"editing"!==n.status,color:"default"})}}),label:"Allow comments"})}),Object(de.jsx)(ve.a,{variant:"subtitle1",children:"selection goals:"}),Object(de.jsxs)("div",{children:[Object(de.jsx)(Ie.a,{control:Object(de.jsx)(ke.a,{control:k,name:"minSelectRequired",render:function(e,t){var a=e.onChange,c=e.onBlur,r=e.value,o=(e.name,e.ref);t.invalid,t.isTouched,t.isDirty;return Object(de.jsx)(Te.a,{onBlur:c,onChange:function(e){return a(e.target.checked)},checked:r,inputRef:o,disabled:"editing"!==n.status,color:"default"})}}),label:"Minimum"}),Object(de.jsx)("div",{style:{display:_?"inline":"none"},children:Object(de.jsx)(Re.a,{inputProps:{"data-testid":"minSelectGoal"},"data-testid":"minSelectGoal",name:"minSelectGoal",type:"number",variant:"outlined",size:"small",InputProps:{inputProps:{max:999,min:1}},inputRef:g({min:"1",max:"999",valueAsNumber:!0,validate:{lowerThanMax:function(e){return!y("maxSelectRequired")||!y("minSelectRequired")||y("maxSelectGoal")>=e}}}),error:!!S.minSelectGoal,helperText:S.minSelectGoal&&"Must be higher than maximum value",disabled:"editing"!==n.status})})]}),Object(de.jsxs)("div",{children:[Object(de.jsx)(Ie.a,{control:Object(de.jsx)(ke.a,{control:k,name:"maxSelectRequired",render:function(e,t){var a=e.onChange,c=e.onBlur,r=e.value,o=(e.name,e.ref);t.invalid,t.isTouched,t.isDirty;return Object(de.jsx)(Te.a,{onBlur:c,onChange:function(e){return a(e.target.checked)},checked:r,inputRef:o,disabled:"editing"!==n.status,color:"default"})}}),label:"Maximum"}),Object(de.jsx)("div",{style:{display:R?"inline":"none"},children:Object(de.jsx)(Re.a,{"data-testid":"maxSelectGoal",name:"maxSelectGoal",type:"number",variant:"outlined",size:"small",InputProps:{inputProps:{max:999,min:1}},inputRef:g({min:"1",max:"999",valueAsNumber:!0,validate:{higherThanMin:function(e){return!y("minSelectRequired")||!y("maxSelectRequired")||y("minSelectGoal")<=e}}}),error:!!S.maxSelectGoal,helperText:S.maxSelectGoal&&"Must be higher than minimum value",disabled:"editing"!==n.status})})]})]})]}),Object(de.jsxs)(Et.a,{elevation:3,className:Pt.a.centeredContainer,children:["confirmed"===n.status?Object(de.jsxs)(ve.a,{children:["Final comment: ",n.finalComment]}):null,Object(de.jsx)(Z.a,{title:x?"copied!":"copy",children:Object(de.jsx)(re.a,{onClick:"confirmed"===n.status?q:function(){r(!0),o("This collection is not yet confirmed"),l("Do you really want to copy selections from an unconfirmed collection?"),s((function(){return q}))},variant:"outlined",children:"Copy selections"})})]})]})},Lt=n(120),zt=n.n(Lt),Gt=n(280),Wt=function(e){var t=e.collectionId,n=e.collection,a=e.setCollection,c=e.setFilteredPhotos,r=e.setConfirmationDialogOpen,o=e.setConfirmationDialogTitle,i=e.setConfirmationDialogContentText,l=e.setConfirmationDialogAgree,s=e.setProgress,d=e.selected,u=e.setSelected,b=e.setAddPhotosDialogOpen,x=Object(Oe.b)().enqueueSnackbar,p=function(){var e=Object(h.a)(j.a.mark((function e(){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B(t,d,s);case 3:n&&(c=n.photos.filter((function(e){var t,n=Object(m.a)(d);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(e.id===a)return!1}}catch(dn){n.e(dn)}finally{n.f()}return!0})).map((function(e,t){return Object(ot.a)(Object(ot.a)({},e),{},{index:t+1})})),a(Object(ot.a)(Object(ot.a)({},n),{},{photos:c}))),u([]),O(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),x("ERROR: Deleting photos failed",{variant:"error"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(h.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=11;break}return e.prev=1,e.next=4,N(t,n.photos);case 4:a(Object(ot.a)(Object(ot.a)({},n),{},{photos:n.photos.map((function(e){return Object(ot.a)(Object(ot.a)({},e),{},{selected:!1,comment:""})}))})),O(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),x("ERROR: Resetting photos failed",{variant:"error"});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),O=function(){r(!1),o(""),i(""),l((function(){})),s(0)};return Object(de.jsxs)(Gt.a,{children:[d.length>0?Object(de.jsxs)("div",{className:zt.a.toolbarSelected,children:[Object(de.jsxs)(ve.a,{color:"inherit",component:"div",children:[d.length," to be deleted"]}),Object(de.jsx)(Z.a,{title:"Delete",children:Object(de.jsx)(J.a,{"aria-label":"delete",onClick:function(){r(!0),o("Do you really want to delete these photos?"),i("WARNING: Delete action cannot be reverted!"),l((function(){return p}))},children:Object(de.jsx)(X.a,{})})})]}):Object(de.jsx)("div",{className:zt.a.toolbarSelected,children:"editing"===n.status?Object(de.jsxs)("div",{className:"horizontalButtons",children:[Object(de.jsx)(re.a,{onClick:function(){b(!0)},variant:"outlined",children:"Add photos"}),Object(de.jsx)(re.a,{onClick:function(){r(!0),o("Do you really want to reset all selections and comments?"),i("WARNING: Reset action cannot be reverted!"),l((function(){return f}))},variant:"outlined",children:"Reset selections and comments"})]}):null}),Object(de.jsx)(yt,{collection:n,setFilteredPhotos:c})]})},At=n(159),Ft=n.n(At),Mt=n(281),Ut=function(e){var t=e.photo,n=e.children,c=e.width,r=e.height,o=Object(a.useState)(!1),l=Object(i.a)(o,2),s=l[0],d=l[1],u=Object(a.useState)(!1),b=Object(i.a)(u,2),j=b[0],h=b[1];return Object(a.useEffect)((function(){fetch(t.cloudUrlWebp,{}).then((function(e){if(e.ok)d(!0);else var n=1,a=setInterval((function(){fetch(t.cloudUrlWebp,{}).then((function(e){e.ok?(clearInterval(a),d(!0)):n>10&&h(!0),n+=1}))}),500)}))}),[]),j?Object(de.jsx)("div",{style:{width:c,height:r,display:"flex",alignItems:"center",justifyContent:"center"},children:Object(de.jsx)(se.a,{})}):s?Object(de.jsx)("div",{children:n}):Object(de.jsx)(Mt.a,{variant:"rect",width:c,height:r})},Vt=function(e){var t=e.collection,n=e.filteredPhotos,a=e.selected,c=e.setSelected,r=e.setPhotoIndex,o=e.setLightboxOpen,i=function(e){return function(t){r(e),o(!0)}},l=function(e){return-1!==a.indexOf(e)};return Object(de.jsx)(M.a,{children:Object(de.jsxs)(U.a,{size:"small",children:[Object(de.jsx)(V.a,{children:Object(de.jsxs)(Y.a,{children:["editing"===t.status?Object(de.jsx)(H.a,{padding:"checkbox",size:"medium",children:Object(de.jsx)(Te.a,{indeterminate:a.length>0&&a.length<n.length,checked:n.length>0&&a.length===n.length,onChange:function(e){if(e.target.checked&&n){var t=n.map((function(e){return e.id}));c(t)}else c([])}})}):null,Object(de.jsx)(H.a,{width:"5%",size:"medium",children:"no."}),Object(de.jsx)(H.a,{width:"10%",children:"thumbnail"}),Object(de.jsx)(H.a,{width:"30%",children:"filename"}),Object(de.jsx)(H.a,{padding:"checkbox"}),Object(de.jsx)(H.a,{children:"comment"})]})}),Object(de.jsx)(Q.a,{children:n.map((function(e,n){return Object(de.jsxs)(Y.a,{selected:l(e.id),children:["editing"===t.status?Object(de.jsx)(H.a,{"data-testid":"checkbox",padding:"checkbox",onClick:function(t){return function(e,t){var n=a.indexOf(t),r=[];-1===n?r=r.concat(a,t):0===n?r=r.concat(a.slice(1)):n===a.length-1?r=r.concat(a.slice(0,-1)):n>0&&(r=r.concat(a.slice(0,n),a.slice(n+1))),c(r)}(0,e.id)},children:Object(de.jsx)(Te.a,{checked:l(e.id)})}):null,Object(de.jsxs)(H.a,{children:[e.index,"."]}),Object(de.jsx)(H.a,{padding:"none",children:Object(de.jsx)(Ut,{photo:e,width:150,height:100,children:Object(de.jsxs)("picture",{children:[Object(de.jsx)("source",{srcSet:e.thumbnailWebp,type:"image/webp"}),Object(de.jsx)("img",{src:e.thumbnail,alt:t.title,className:Ft.a.thumbnail,onClick:i(n)})]})})}),Object(de.jsx)(H.a,{children:e.filename}),Object(de.jsx)(H.a,{padding:"checkbox",children:e.selected?Object(de.jsx)(Ve.a,{"data-testid":"selected"}):null}),Object(de.jsx)(H.a,{"data-testid":"comment",children:e.comment})]},e.id)}))})]})})},Yt=n(91),Ht=n.n(Yt),Qt=function(e){var t=e.collectionId,n=e.setCollection,c=e.setProgress,r=e.addPhotosDialogOpen,o=e.setAddPhotosDialogOpen,i=e.progress,l=Object(ke.b)({defaultValues:{files:[]}}),s=l.handleSubmit,d=l.errors,u=l.control,b=Object(Oe.b)().enqueueSnackbar,m=function(){var e=Object(h.a)(j.a.mark((function e(a){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_(t,a.files,c);case 3:return o(!1),c(0),e.next=7,D(t);case 7:r=e.sent,n(r),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),b("ERROR: Photo upload failed",{variant:"error"});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(de.jsx)($.a,{open:r,children:Object(de.jsxs)("form",{onSubmit:s(m),children:[Object(de.jsx)(ee.a,{id:"alert-dialog-title",children:"Add photos"}),Object(de.jsx)(J.a,{onClick:function(){return o(!1)},className:Ht.a.exitBtn,children:Object(de.jsx)(se.a,{})}),Object(de.jsxs)(te.a,{children:[i?Object(de.jsx)(_e.a,{p:"3px",children:Object(de.jsx)(ae.a,{variant:"determinate",value:i})}):Object(de.jsx)(_e.a,{p:"5px"}),Object(de.jsx)("div",{className:Ht.a.dropzoneError,children:Object(de.jsx)(ve.a,{"data-testid":"error",variant:"body1",children:d.files?"Images are required":Object(de.jsx)(a.Fragment,{children:"\u200b"})})}),Object(de.jsx)(ke.a,{name:"files",control:u,rules:{validate:{notEmpty:function(e){return e.length>0}}},render:function(e){var t=e.onChange;return Object(de.jsx)(qe.a,{acceptedFiles:["image/jpeg"],dropzoneText:"Drop images or click to upload here",onChange:function(e){return t(Object(Se.a)(e))},filesLimit:999,previewGridClasses:{item:"itemReference"},previewGridProps:{container:{spacing:1},item:{sm:2,lg:2,md:2}},showAlerts:!1,showPreviewsInDropzone:!1,showPreviews:!0,showFileNamesInPreview:!0,dropzoneClass:"".concat(Ht.a.dropzone," ").concat(d.files&&Ht.a.dropzoneErrorBorder)})}})]}),Object(de.jsxs)(ce.a,{children:[Object(de.jsx)(re.a,{disabled:!!i,onClick:function(){return o(!1)},color:"secondary",children:"Cancel"}),Object(de.jsx)(re.a,{disabled:!!i,color:"primary",type:"submit",children:"Add"})]})]})})},Zt=function(){var e=Object(u.g)().id,t=Object(a.useState)(null),n=Object(i.a)(t,2),c=n[0],r=n[1],o=Object(a.useState)([]),l=Object(i.a)(o,2),s=l[0],d=l[1],b=Object(a.useState)(0),j=Object(i.a)(b,2),h=j[0],m=j[1],x=Object(a.useState)(!1),p=Object(i.a)(x,2),f=p[0],O=p[1],g=Object(a.useState)([]),v=Object(i.a)(g,2),C=v[0],S=v[1],w=Object(a.useState)(!1),y=Object(i.a)(w,2),k=y[0],_=y[1],R=Object(a.useState)(""),I=Object(i.a)(R,2),T=I[0],q=I[1],B=Object(a.useState)(""),N=Object(i.a)(B,2),P=N[0],E=N[1],L=Object(a.useState)((function(){})),z=Object(i.a)(L,2),G=z[0],W=z[1],M=Object(a.useState)(0),U=Object(i.a)(M,2),V=U[0],Y=U[1],H=Object(a.useState)(!1),Q=Object(i.a)(H,2),Z=Q[0],K=Q[1],X=Object(a.useState)(!1),$=Object(i.a)(X,2),ee=$[0],te=$[1],ne=Object(a.useState)(""),ae=Object(i.a)(ne,2),ce=ae[0],re=ae[1],oe=Object(Oe.b)().enqueueSnackbar;Object(a.useEffect)((function(){D(e).then((function(e){r(e),d(e.photos)})).catch((function(e){oe("ERROR: Getting collection failed",{variant:"error"})}))}),[e,oe]);return null===c||null===s?Object(de.jsx)(A.a,{open:!0,children:Object(de.jsx)(F.a,{color:"inherit"})}):Object(de.jsxs)("div",{children:[Object(de.jsx)(Dt,{collectionId:e,collection:c,setCollection:r,setConfirmationDialogOpen:_,setConfirmationDialogTitle:q,setConfirmationDialogContentText:E,setConfirmationDialogAgree:W,setProgress:Y}),Object(de.jsx)(Wt,{collectionId:e,collection:c,setCollection:r,filteredPhotos:s,setFilteredPhotos:d,setConfirmationDialogOpen:_,setConfirmationDialogTitle:q,setConfirmationDialogContentText:E,setConfirmationDialogAgree:W,setProgress:Y,selected:C,setSelected:S,setAddPhotosDialogOpen:K}),Object(de.jsx)(Vt,{collection:c,filteredPhotos:s,selected:C,setSelected:S,setPhotoIndex:m,setLightboxOpen:O}),s.length>0&&Object(de.jsx)(nt,{filteredPhotos:s,lightboxOpen:f,setLightboxOpen:O,lightboxIndex:h,setLightboxIndex:m,toolbarButtons:[s[h].comment.length>0?Object(de.jsx)(J.a,{className:Rt.a.toolbarIcon,onClick:function(){return te(!0),void(s&&(e?(m(e),re(s[e].comment)):re(s[h].comment)));var e},children:Object(de.jsx)(Bt.a,{})}):Object(de.jsx)("div",{className:Rt.a.toolbarIcon}),s[h].selected?Object(de.jsx)(J.a,{className:Rt.a.toolbarIcon,disabled:!0,children:Object(de.jsx)(Tt.a,{})}):Object(de.jsx)("div",{className:Rt.a.toolbarIcon})]}),Object(de.jsx)(ue,{dialogOpen:k,progress:V,onClickCancel:function(){return _(!1)},onClickAgree:G,dialogTitle:T,dialogContentText:P}),Object(de.jsx)(Qt,{collectionId:e,setCollection:r,setProgress:Y,addPhotosDialogOpen:Z,setAddPhotosDialogOpen:K,progress:V}),Object(de.jsx)(rt,{commentOpen:ee,setCommentOpen:te,commentTextarea:ce,disabled:!0})]})},Jt=n(121),Kt=n.n(Jt),Xt=function(){return Object(de.jsxs)("div",{className:Kt.a.container,children:[Object(de.jsx)(re.a,{to:"/",component:d.b,variant:"outlined",children:"home"}),Object(de.jsxs)("div",{className:Kt.a.centeredConainer,children:[Object(de.jsx)(ve.a,{variant:"h3",children:"Page not found"}),Object(de.jsx)(ve.a,{variant:"h1",children:"404"})]})]})},$t=n(282);var en=function(){var e=Object(a.useState)(null),t=Object(i.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(!0),o=Object(i.a)(r,2),l=o[0],b=o[1],j=Object(a.useState)(void 0),h=Object(i.a)(j,2),m=h[0],x=h[1],p=Object(a.useState)(100),f=Object(i.a)(p,2),O=f[0],v=f[1],C=Object(Oe.b)().enqueueSnackbar;return Object(a.useEffect)((function(){g.onAuthStateChanged((function(e){c(e?e.uid:null),b(!1)}))}),[]),Object(a.useEffect)((function(){k().then((function(e){e&&e.logoUrl&&e.logoWidth&&(x(e.logoUrl),v(e.logoWidth))})).catch((function(e){C("ERROR: Getting site settings failed",{variant:"error",persist:!0})}))}),[C]),l?Object(de.jsx)(A.a,{open:!0,children:Object(de.jsx)(F.a,{color:"inherit"})}):Object(de.jsx)($t.a,{maxWidth:"xl",children:Object(de.jsxs)(_e.a,{ml:2,mr:2,children:[m&&Object(de.jsx)("a",{href:window.location.origin.toString(),children:Object(de.jsx)("img",{className:s.a.logo,src:m,style:{width:O},alt:"logo"})}),n&&Object(de.jsx)("div",{className:s.a.logoutBtn,children:Object(de.jsx)(re.a,{onClick:function(){return g.signOut()},variant:"outlined",children:"Logout"})}),Object(de.jsx)(d.a,{basename:"/photoproof/",children:Object(de.jsxs)(u.c,{children:[Object(de.jsx)(u.a,{path:"/collection/:id",render:function(){return Object(de.jsx)(kt,{})}}),n?null:Object(de.jsx)(u.a,{path:"/",render:function(){return Object(de.jsx)(Le,{})}}),Object(de.jsx)(u.a,{path:"/settings",render:function(){return Object(de.jsx)(De,{logoWidth:O,setLogoUrl:x,setLogoWidth:v})}}),Object(de.jsx)(u.a,{path:"/new",render:function(){return Object(de.jsx)(Be,{})}}),Object(de.jsx)(u.a,{path:"/edit/:id",render:function(){return Object(de.jsx)(Zt,{})}}),Object(de.jsx)(u.a,{exact:!0,path:"/",render:function(){return Object(de.jsx)(Ce,{})}}),Object(de.jsx)(u.a,{render:function(){return Object(de.jsx)(Xt,{})}})]})})]})})},tn=(n(217),n(283)),nn=n(162),an=Object(nn.a)({palette:{common:{black:"#000",white:"#fff"},background:{paper:"rgba(64, 64, 64, 1)",default:"rgba(39, 39, 43, 1)"},primary:{light:"rgba(149, 154, 184, 1)",main:"rgba(41, 46, 136, 1)",dark:"rgba(73, 86, 158, 1)",contrastText:"#fff"},secondary:{light:"rgba(138, 35, 70, 1)",main:"rgba(103, 9, 42, 1)",dark:"rgba(152, 14, 63, 1)",contrastText:"rgba(255, 255, 255, 1)"},error:{light:"rgba(179, 135, 135, 1)",main:"rgba(128, 70, 50, 1)",dark:"rgba(102, 50, 50, 1)",contrastText:"#fff"},text:{primary:"rgba(241, 241, 241, 1)",secondary:"rgba(228, 228, 228, 1)",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"}},typography:{fontFamily:["Nunito","Roboto",'"Helvetica Neue"',"Arial","sans-serif"].join(",")},overrides:{MuiButton:{contained:{backgroundColor:"#555",color:"#eee","&:hover":{backgroundColor:"#666",color:"#eee"}},outlined:{borderColor:"#eee"},textPrimary:{color:"rgba(188, 194, 230)"},textSecondary:{color:"rgb(255, 87, 29);"}},MuiTableCell:{head:{fontSize:"1rem !important",backgroundColor:"rgba(255,255,255,0.1)"}},MuiOutlinedInput:{root:{"&$disabled":{color:"#eee"}},notchedOutline:{borderWidth:"1px",borderColor:"#eee"}},MuiCheckbox:{root:{color:"#aaa","&$disabled":{color:"#555"}}},MuiTableRow:{hover:{"&:hover":{backgroundColor:"#444 !important",cursor:"pointer"}}},MuiDialogTitle:{root:{paddingRight:"3rem"}}}}),cn=n(284),rn=n(268),on=n(270),ln=Object(on.a)({success:{backgroundColor:"rgba(41, 136, 77, 1) !important","& button":{color:"white !important"}},error:{backgroundColor:"rgba(138, 35, 70, 1) !important","& button":{color:"white !important"}},warning:{backgroundColor:"rgba(171, 170, 0, 1) !important","& button":{color:"white !important"}},info:{backgroundColor:"rgba(41, 46, 136, 1) !important","& button":{color:"white !important"}},root:{"& > div":{backgroundColor:"rgba(183, 183, 183, 1)",color:"black","& button":{color:"black"}}}}),sn=function(e){var t=e.children,n=ln(),a=c.a.createRef(),r=function(e){return function(){a.current.closeSnackbar(e)}};return Object(de.jsx)(Oe.a,{classes:{variantSuccess:n.success,variantError:n.error,variantWarning:n.warning,variantInfo:n.info,root:n.root},ref:a,maxSnack:5,hideIconVariant:!0,anchorOrigin:{vertical:"bottom",horizontal:"left"},action:function(e){return Object(de.jsx)(re.a,{onClick:r(e),children:"\u2715"})},TransitionComponent:rn.a,children:t})};o.a.render(Object(de.jsx)(c.a.StrictMode,{children:Object(de.jsxs)(tn.a,{theme:an,children:[Object(de.jsx)(cn.a,{}),Object(de.jsx)(sn,{children:Object(de.jsx)(en,{})})]})}),document.getElementById("root"))},52:function(e,t,n){e.exports={masonryGrid:"styles_masonryGrid__2qe5-",masonryGridColumn:"styles_masonryGridColumn__Q4hmE",photoThumbnailGrid:"styles_photoThumbnailGrid__8nntj",imgBorder:"styles_imgBorder__3fi3T",photoIndex:"styles_photoIndex__2u3av",heartBtn:"styles_heartBtn__3LbnO",heartBtnSelected:"styles_heartBtnSelected__1etCZ",commentBtn:"styles_commentBtn__oHX1C",commentBtnFilled:"styles_commentBtnFilled__2T58n"}},78:function(e,t,n){e.exports={toolbarIcon:"styles_toolbarIcon__1b01N",fixedBtn:"styles_fixedBtn__1nuOb"}},88:function(e,t,n){e.exports={dropzoneError:"styles_dropzoneError__3-m5E",customFileInput:"styles_customFileInput__1QhDy",fileInputBtn:"styles_fileInputBtn__39JlO",slider:"styles_slider__2BL7N"}},89:function(e,t,n){e.exports={toolbarIcon:"styles_toolbarIcon__1UWSq"}},90:function(e,t,n){e.exports={toolbarIcon:"styles_toolbarIcon__170qu"}},91:function(e,t,n){e.exports={dropzone:"styles_dropzone__qzElo",exitBtn:"styles_exitBtn__2CkxR",dropzoneError:"styles_dropzoneError__3EhZp",dropzoneErrorBorder:"styles_dropzoneErrorBorder__3qup_"}}},[[218,1,2]]]);
//# sourceMappingURL=main.e540c581.chunk.js.map